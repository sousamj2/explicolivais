<div class="profile-container">
    <!-- Top welcome block -->
    <div class="welcome-block">
        <h1>{{greeting}} {{full_name}} ({{email}})</h1>
        <h2>A última vez que entrou foi {{lastlogin}}</h2>
    </div>
    
    <br>

    <!-- TIER 1 ONLY: Upgrade Button -->
    {% if tier == 1 %}
    <div class="tier-upgrade-section">
        <div class="info-box warning">
            <a href="{{ url_for('elevate_tier.elevate_tier') }}" class="btn btn--primary">
                Pedir Explicações (só no concelho de Lisboa)
            </a>
        </div>
    </div>

    <!-- TIER 2 ONLY: Full Personal Info Section -->
    {% elif tier == 2 %}
    <div class="personal-info-section">
        <h3>Informação Pessoal</h3>
        <div class="info-grid">
            <div class="info-item">
                <label>Morada:</label>
                <p>{{ morada }}</p>
            </div>
            <div class="info-item">
                <label>Código Postal:</label>
                <p>{{ codigopostal }}</p>
            </div>
            <div class="info-item">
                <label>NIF:</label>
                <p>{{ nif }}</p>
            </div>
            <div class="info-item">
                <label>Telemóvel:</label>
                <p>{{ telemovel }}</p>
            </div>
        </div>
    </div>

    <div class="status-section">
        <h3>Estado da Conta</h3>
        <div class="status-grid">
            <div class="status-item">
                <span class="status-badge" style="background-color: #{{ vpn_check_color }};">
                    Verificação VPN: ✓
                </span>
            </div>
            <div class="status-item">
                <span class="status-badge" style="background-color: #{{ primeiro_contacto_color }};">
                    Primeiro Contacto: Pendente
                </span>
            </div>
            <div class="status-item">
                <span class="status-badge" style="background-color: #{{ primeira_aula_color }};">
                    Primeira Aula: Pendente
                </span>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Quiz History Section -->
    {% if quiz_history %}
    <div class="quiz-history-section">
        <h3>Histórico de Quizzes</h3>
        <table class="styled-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Pontuação</th>
                    <th>Resultados</th>
                </tr>
            </thead>
            <tbody>
                {% for quiz in quiz_history %}
                <tr>
                    <td>{{ quiz.quiz_date | format_data }}</td>
                    <td>{{ "%.1f"|format(quiz.score_perc or 0.0) }}%</td>
                    <td><a href="{{ url_for('quiz.view_quiz_result', quiz_uuid=quiz.q_uuid) }}">{{ quiz.q_uuid[:8] }}...</a></td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% endif %}

    
</div>
